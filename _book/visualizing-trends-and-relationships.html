<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 19 Visualizing Trends and Relationships | Urban Informatics Toolkit</title>
<meta name="author" content="Josiah Parry">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.2"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/header-attrs-2.5.3/header-attrs.js"></script><script src="libs/jquery-3.5.1/jquery-3.5.1.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.5.3/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.5.3/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.2.3.9000/tabs.js"></script><script src="libs/bs3compat-0.2.3.9000/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script><script src="https://cdn.jsdelivr.net/autocomplete.js/0/autocomplete.jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/mark.js@8.11.1/dist/mark.min.js"></script><!-- CSS -->
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Urban Informatics Toolkit</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"><span class="header-section-number">1</span> Welcome</a></li>
<li class="book-part">Foundations of Urban Informatics</li>
<li><a class="" href="the-utility-and-danger-of-big-data.html"><span class="header-section-number">2</span> The Utility and Danger of Big Data</a></li>
<li><a class="" href="data-in-the-municipal-context.html"><span class="header-section-number">3</span> Data in the municipal context</a></li>
<li><a class="" href="approaches-to-and-schools-of-urban-informatics.html"><span class="header-section-number">4</span> Approaches to and Schools of Urban Informatics</a></li>
<li><a class="" href="ecometrics.html"><span class="header-section-number">5</span> Ecometrics</a></li>
<li class="book-part">Toolkit Foundations</li>
<li><a class="" href="the-basics.html"><span class="header-section-number">6</span> The basics</a></li>
<li><a class="" href="r-as-a-calculator.html"><span class="header-section-number">7</span> R as a calculator</a></li>
<li><a class="" href="reading-data.html"><span class="header-section-number">8</span> Reading data</a></li>
<li><a class="" href="exploratory-visual-analysis.html"><span class="header-section-number">9</span> Exploratory Visual Analysis</a></li>
<li><a class="" href="general-data-manipulation.html"><span class="header-section-number">10</span> General data manipulation</a></li>
<li><a class="" href="thats-too-much-data.html"><span class="header-section-number">11</span> That’s too much data</a></li>
<li><a class="" href="the-pipe.html"><span class="header-section-number">12</span> The pipe %&gt;%</a></li>
<li><a class="" href="creating-new-measures.html"><span class="header-section-number">13</span> Creating new measures</a></li>
<li><a class="" href="data-structures.html"><span class="header-section-number">14</span> Data Structures</a></li>
<li><a class="" href="summary-statistics.html"><span class="header-section-number">15</span> Summary statistics</a></li>
<li><a class="" href="summarizing-the-tidy-way.html"><span class="header-section-number">16</span> Summarizing the tidy way</a></li>
<li><a class="" href="toolkit-review.html"><span class="header-section-number">17</span> Toolkit review</a></li>
<li class="book-part">Vizualization Strategies</li>
<li><a class="" href="layered-i.html"><span class="header-section-number">18</span> Grammar of layered graphics I</a></li>
<li><a class="active" href="visualizing-trends-and-relationships.html"><span class="header-section-number">19</span> Visualizing Trends and Relationships</a></li>
<li><a class="" href="grammer-of-layered-graphics-ii.html"><span class="header-section-number">20</span> Grammer of layered graphics II</a></li>
<li><a class="" href="visualizing-beyond-2-dimensions.html"><span class="header-section-number">21</span> Visualizing beyond 2-dimensions</a></li>
<li><a class="" href="visualizing-through-time.html"><span class="header-section-number">22</span> Visualizing through time</a></li>
<li><a class="" href="visualization-review.html"><span class="header-section-number">23</span> Visualization Review</a></li>
<li class="book-part">Expanding the Toolkit</li>
<li><a class="" href="multiple-data-sets.html"><span class="header-section-number">24</span> Multiple data sets</a></li>
<li><a class="" href="statistics.html"><span class="header-section-number">25</span> Statistics</a></li>
<li><a class="" href="spatial-analysis.html"><span class="header-section-number">26</span> Spatial Analysis</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="visualizing-trends-and-relationships" class="section level1" number="19">
<h1>
<span class="header-section-number">19</span> Visualizing Trends and Relationships<a class="anchor" aria-label="anchor" href="#visualizing-trends-and-relationships"><i class="fas fa-link"></i></a>
</h1>
<p>We now have a language for creating graphics. Next we must build the intuition of which plots to build and when. We will cover the most basic of visualizations starting with univariate followed by bivariate plots. We will then discuss ways to extend visualizations beyond two variables and some simple principles of design.</p>
<p>In most cases a data analysis will start with a visualization. And that visualization will be dictated by the characteristics of the data available to us. In intro to statistics you probably learned about the four types of data which are: nominal and ordinal, together referred to as <em>categorical</em>; interval and ratio, together referred to as <em>numerical</em> We’re going to contextualize these in R terms where <em>categorical</em> is <code>character</code> and <em>numerical</em> is <code>numeric</code>.</p>
<p>Categorical and numeric have different are treated differently and thus lead to different kinds of visualizations. When we refer to categorical or character, we are often thinking of groups or a label. In the case where we don’t have a quantifiable numeric value, we often count those variables.</p>
<p>Throughout this chapter we will use another ACS data with variables focused towards housing. This file lives at <code>data/acs-housing.csv</code>.</p>
<div class="sourceCode" id="cb190"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span>

<span class="va">acs</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="st">"data/acs-housing.csv"</span><span class="op">)</span></code></pre></div>
<div id="univariate-visualizations" class="section level2" number="19.1">
<h2>
<span class="header-section-number">19.1</span> Univariate visualizations<a class="anchor" aria-label="anchor" href="#univariate-visualizations"><i class="fas fa-link"></i></a>
</h2>
<p>There is always a strong urge to begin creating epic graphs with facets, shapes, colors, and hell, maybe even three dimensions. But we must resist that urge! We <em>must</em> understand the distributions of our data before we start visualizing them and drawing conlcusions. Who knows, we may find anomalies or errors in the data cleaning process or even collection process. We should always begin by studying the indivual variable characteristics with univariate visualizations.</p>
<blockquote>
<p>Note that univariate visualizations are for numeric variables</p>
</blockquote>
<p>There a couple of things that we are looking for in a numeric univariate visualization. In the broadest sense, we’re looking at characterizations of central tendency, and spread. When we create these visualizations we’re trying to answer the following questions:</p>
<ul>
<li>Where is the middle?</li>
<li>Is there more than one middle?</li>
<li>How close together are our points?</li>
<li>Are there any points very far from the middle?</li>
<li>Is the distribution flat? Is it steep?</li>
</ul>
<p>In exploring these questions we will rely on three types of plots:</p>
<ol style="list-style-type: decimal">
<li>Histogram</li>
<li>Density</li>
<li>Box plot</li>
</ol>
<p>Each type of plot above serves a different purpose.</p>
<div id="histogram" class="section level3" number="19.1.1">
<h3>
<span class="header-section-number">19.1.1</span> Histogram<a class="anchor" aria-label="anchor" href="#histogram"><i class="fas fa-link"></i></a>
</h3>
<p>We have already created a number of histograms already but it is always good to revisit the subject. Histograms puts our data into <code>n</code> buckets (or bins, or groups, or whatever your stats professor called them), counts the number of values that fall into each bucket, and use that frequency count as the height of each bar.</p>
<p>The true benefit of the histogram is that it is the easiest chart to consume by the layperson. But the downside is that merely by changing the number of bins, the distribution can be rather distorted and it is on you, the researcher and analyst, to ensure that there is no miscommunication of data.</p>
<p>When we wish to create a histogram, we use the <code><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram(bins = n)</a></code> geom layer. Since it is a univariate visualization, we only specify one aesthetic mapping—in this case it is <code>x</code>.</p>
<p>Let’s look at the distribution of the <code>med_yr_moved_inraw</code> column for an example.</p>
<ul>
<li>Create a histogram of <code>med_yr_moved_inraw</code> with 10 bins.</li>
</ul>
<div class="sourceCode" id="cb191"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">acs</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">med_yr_moved_inraw</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>bins <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="04b-visualization-strategies_files/figure-html/unnamed-chunk-3-1.png" width="672"></div>
<p>This histogram is rather informative! We can see that shortly after 2000, there was a steep increase in people moving in. Right after 2005 we can see that number tapering off—presumably due to the housing crises that begat the Great Recession.</p>
<p>Now, if we do not specify the number of bins, we get a very different histogram.</p>
<div class="sourceCode" id="cb192"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">acs</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">med_yr_moved_inraw</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="04b-visualization-strategies_files/figure-html/unnamed-chunk-4-1.png" width="672"></div>
<p>The above histogram shows gaps in between buckets of the histogram. On a first glance, we would assume that there may be missing data or some phenemonon in the data recording process that led to some sort of missingness. But that isn’t the case! If we count the number of observations per year manually, the story becomes apparent.</p>
<blockquote>
<p>Note: I am using the base R function <code><a href="https://rdrr.io/r/base/table.html">table()</a></code> to produce counts. This produces a class <code>table</code> object which is less friendly to work with. Using <code><a href="https://rdrr.io/r/base/table.html">table()</a></code> rather than count serves two purposes: 1) you get to learn another function and 2) the printing method is more friendly for a bookdown document.</p>
</blockquote>
<div class="sourceCode" id="cb193"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="op">(</span><span class="va">moved_counts</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">acs</span><span class="op">$</span><span class="va">med_yr_moved_inraw</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; 1991 1995 1996 1997 1998 1999 2000 2001 2002 2003 2004 2005 2006 2007 2008 2009 </span>
<span class="co">#&gt;    1    2    5    7   14   31   56   77  108  121  141  109  113   84   73   67 </span>
<span class="co">#&gt; 2010 2011 2012 2013 </span>
<span class="co">#&gt;  125  140   29    8</span>

<span class="fu">glue</span><span class="fu">::</span><span class="fu"><a href="https://glue.tidyverse.org/reference/glue.html">glue</a></span><span class="op">(</span><span class="st">"There are {length(moved_counts)} unique values"</span><span class="op">)</span>
<span class="co">#&gt; There are 20 unique values</span></code></pre></div>
<blockquote>
<p>The glue function provides a way to create strings by combining R expressions and plain text. More in the appendix.</p>
</blockquote>
<p>This above tells us something really important and explains why our histogram is all wonky. Our histogram looks the way it does because we have specified more bins than there are unique values! The moral of the story is that when creating a histogram, be thoughtful and considerate of the number of bins your are using—it changes the whole story.</p>
</div>
<div id="density-function-plot" class="section level3" number="19.1.2">
<h3>
<span class="header-section-number">19.1.2</span> Density Function plot<a class="anchor" aria-label="anchor" href="#density-function-plot"><i class="fas fa-link"></i></a>
</h3>
<p>Histograms are a fairly straight-forward chart that provides illustrates the distribution of a sample space. The histogram does not provide a fine grain picture of what the underlying distribution looks like. When we are concerned with understanding the underlying shape of a distribution we should use a <strong>kernel density plot</strong> (aka density plot).</p>
<p>The density plot represents a variable over a continuous space and by doing so creates a much better visual representation of the underlying distribution shape with all of its curves.</p>
<p>Like a histogram, we only provide a single variable to the aesthetic mappings. The geom layer for a density distribution is <code><a href="https://ggplot2.tidyverse.org/reference/geom_density.html">geom_density()</a></code>.</p>
<ul>
<li>Create a density plot of <code>med_yr_moved_inraw</code>
</li>
</ul>
<div class="sourceCode" id="cb194"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">acs</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">med_yr_moved_inraw</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_density.html">geom_density</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="04b-visualization-strategies_files/figure-html/unnamed-chunk-6-1.png" width="672"></div>
<p>Now compare the histogram to the density plot.</p>
<ul>
<li>Which do you feel does a better job illustrating the shape of the distribution?</li>
<li>Which do you think is more interpretable?</li>
</ul>
<div class="inline-figure"><img src="04b-visualization-strategies_files/figure-html/unnamed-chunk-7-1.png" width="672"></div>
</div>
<div id="boxplots" class="section level3" number="19.1.3">
<h3>
<span class="header-section-number">19.1.3</span> Boxplots<a class="anchor" aria-label="anchor" href="#boxplots"><i class="fas fa-link"></i></a>
</h3>
<p>The boxplot is the third univariate visualization we will cover. Unlike histograms and density plot, the box plot’s power comes from being able to effectively illustrate outliers and the general spread of a variable.</p>
<p>There are five elements that make the boxplot:</p>
<ol style="list-style-type: decimal">
<li>Minimum</li>
<li>First quartile (25th percentile)</li>
<li>Median (50th percentile)</li>
<li>Third quartile (75th percentile)</li>
<li>Maximum</li>
</ol>
<p>When creating a boxplot, the definition of minimum and maximum change a little bit. We are defining the minimums and maximums <em>without</em> the outliers. And in the context of a boxplot the outliers are determined by the <strong>IQR</strong> (inner quartile range). The IQR is different between the third and first quartile. We then take the IQR and <em>add</em> it to the third quartile to find the upper bound and then subtract the IQR from the first quartile to find the lower bound.</p>
<p><span class="math inline">\(IQR = Q3 - Q1\)</span></p>
<p><span class="math inline">\(Minimum = Q1 - IQR\)</span></p>
<p><span class="math inline">\(Maximum = Q3 + IQR\)</span></p>
<blockquote>
<p>Note that this is a naive approach to defining an outlier. This is not a hard and fast rule of what is considered an outlier. There are many considerations that should go into defining an outlier other than arbitrary statistical heuristics. Be sure to have a deep think before calling anything an outlier.</p>
</blockquote>
<p>Any points that fall outside of that the minimum and maximum are plotted individually to give you an idea of any <em>potential</em> outliers.</p>
<p>To create a boxplot we use the <code><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot()</a></code> function.</p>
<ul>
<li>Create a boxplot of <code>med_house_income</code>
</li>
</ul>
<div class="sourceCode" id="cb195"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">acs</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">med_house_income</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot</a></span><span class="op">(</span><span class="op">)</span> </code></pre></div>
<div class="inline-figure"><img src="04b-visualization-strategies_files/figure-html/unnamed-chunk-8-1.png" width="672"></div>
<p>From this boxplot, what can we tell about median household income in Massachusetts?</p>
</div>
<div id="empirical-cumulative-distribution-function-ecdf" class="section level3" number="19.1.4">
<h3>
<span class="header-section-number">19.1.4</span> Empirical Cumulative Distribution Function (ECDF)<a class="anchor" aria-label="anchor" href="#empirical-cumulative-distribution-function-ecdf"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb196"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">acs</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">med_house_income</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_step</a></span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"ecdf"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="04b-visualization-strategies_files/figure-html/unnamed-chunk-9-1.png" width="672"></div>
</div>
<div id="barchart" class="section level3" number="19.1.5">
<h3>
<span class="header-section-number">19.1.5</span> Barchart<a class="anchor" aria-label="anchor" href="#barchart"><i class="fas fa-link"></i></a>
</h3>
<p>The last univariate chart we will touch on is the bar chart. When we are faced with a single categorical variable there is not much that we can do to summarize it. The approach is to identify the frequency or relative frequency with which each level (unqiue value) occurs. This is essentially a histogram but for values which cannot have ranges and where order does not matter—though we may be interested in ordering our values.</p>
<p>To create a bar chart of categorical features we simply provide that feature to our aesthetic mapping and add <code><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar()</a></code> layer</p>
<div class="sourceCode" id="cb197"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">acs</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">county</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="04b-visualization-strategies_files/figure-html/unnamed-chunk-10-1.png" width="672"></div>
<p>I’m sure you’re looking at this chart and thinking something along the lines of “I can’t read a single label, this is awful.” And yeah, you’re totally right. In general when creating a bar chart it is better to to flip the axes. The main justification for fliping the axes is so that we can read the labels better. In addition to making the labels more legible, by flipping the axes, the comparisons between bars is perceivedly easier.</p>
<p>To flip the axes, we can map the <code>county</code> column to the <code>y</code> axis rather than <code>x</code> (which is done positionally).</p>
<div class="sourceCode" id="cb198"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">acs</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">county</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="04b-visualization-strategies_files/figure-html/unnamed-chunk-11-1.png" width="672"></div>
<p>If you find yourself in the situation where you have variables mapped to both the x and y columns we can add a <code>coor_flip()</code> layer to the plot which will handle the flipping for us.</p>
<div class="sourceCode" id="cb199"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">acs</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">county</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html">coord_flip</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="04b-visualization-strategies_files/figure-html/unnamed-chunk-12-1.png" width="672"></div>
<p>Be sure to keep <code><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html">coord_flip()</a></code> in your back pocket! It is a rather handy function.</p>
</div>
</div>
<div id="bivariate-visualizations" class="section level2" number="19.2">
<h2>
<span class="header-section-number">19.2</span> Bivariate visualizations<a class="anchor" aria-label="anchor" href="#bivariate-visualizations"><i class="fas fa-link"></i></a>
</h2>
<p>We are ready to introduce a second variable into the analysis. With bivariate relationships (two-variables) we are often looking to answer, in general, if one variable changes with another. But the way we approach these relationships is dependent upon the type of variables we have to work with. We can can either be looking at the bivariate relationship of</p>
<ul>
<li>2 numeric variables,</li>
<li>1 numeric variable and 1 categorical,</li>
<li>or 2 categorical variables.</li>
</ul>
<div id="two-numeric-variables" class="section level3" number="19.2.1">
<h3>
<span class="header-section-number">19.2.1</span> Two Numeric Variables<a class="anchor" aria-label="anchor" href="#two-numeric-variables"><i class="fas fa-link"></i></a>
</h3>
<div id="scatter-plot" class="section level4" number="19.2.1.1">
<h4>
<span class="header-section-number">19.2.1.1</span> Scatter plot<a class="anchor" aria-label="anchor" href="#scatter-plot"><i class="fas fa-link"></i></a>
</h4>
<p>When confronted with two numeric variables, your first stop should be the scatter plot. A scatter plot positions takes two continuous variables and plots each point at their (x, y) coordinate. This type of plot illustrates how the two variables change with each other—if at all. It is exceptionally useful for pinpointing linearity, clusters, points that may be disproportionately distorting a relationship, etc.</p>
<p>Scatter plots are useful for asking questions such as “when x increases how does y change?” Because of this natural formulation of statistical questions—i.e. we are always interested in how the x affects the y—we plot the variable of interest vertically along the y axis and the independent variable along the horizontal x axis.</p>
<p>Take for example the question “how does the proportion of individuals under the age of eighteen increase with the number of family households?”</p>
<p>Using a scatter plot, we can begin to answer this question! Notice how in the formulation of our question we are asking how does y change with x. In this formulation we should plot the <code>fam_house_per</code> against the <code>age_u18</code> column.</p>
<blockquote>
<p>Note: when plotting <em>against</em> something. We are plotting x <em>against</em> y.</p>
</blockquote>
<p>Recall that to plot a scatter plot we use the <code><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point()</a></code> layer with an x and y aesthetic mapped.</p>
<div class="sourceCode" id="cb200"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">acs</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">fam_house_per</span>, <span class="va">age_u18</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="04b-visualization-strategies_files/figure-html/unnamed-chunk-13-1.png" width="672"></div>
<p>The above scatter plot is useful, but there is one downside we should be aware of and that is the number of points that we are plotting. Since there are over 1,400 points—as is often the case with big data—they will likely stack on top of each other hiding other points and leading to a dark uninterpretable mass! We want to be able to decipher the concentration of points as well as the shape.</p>
<blockquote>
<p>When there are too many points to be interpretable this is called overplotting</p>
</blockquote>
<p>To improve the visualization we have a few options. We can make each point more transparent so as they stack on top of eachother they become darker. Or, we can make the points very small so that as they cluster they become a bigger and darker mass.</p>
<p>To implement these stylistic enhancements we need to set some aesthetic arguments inside of the geom layer. In order to change the transparency of the layer we will change the <code>alpha</code> argument. <code>alpha</code> takes a value from 0 to 1 where 0 is entirely transparent and 1 is completely opaque. Try a few values and see what floats your boat!</p>
<div class="sourceCode" id="cb201"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">acs</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">fam_house_per</span>, <span class="va">age_u18</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">1</span><span class="op">/</span><span class="fl">4</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="04b-visualization-strategies_files/figure-html/unnamed-chunk-14-1.png" width="672"></div>
<p>Alternatively, we can change the size (or even a combination of both) of our points. To do this, change the <code>size</code> argument inside of <code><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point()</a></code>. There is not a finite range of values that you can specify so experimentation is encouraged!</p>
<div class="sourceCode" id="cb202"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">acs</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">fam_house_per</span>, <span class="va">age_u18</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">1</span><span class="op">/</span><span class="fl">3</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="04b-visualization-strategies_files/figure-html/unnamed-chunk-15-1.png" width="672"></div>
<blockquote>
<p>Remember when deciding the <code>alpha</code> and <code>size</code> parameters your are implementing stylistic changes and as such there are no <em>correct</em> solution. Only marginally better solutions.</p>
</blockquote>
</div>
<div id="hexagonal-heatmap" class="section level4" number="19.2.1.2">
<h4>
<span class="header-section-number">19.2.1.2</span> Hexagonal heatmap<a class="anchor" aria-label="anchor" href="#hexagonal-heatmap"><i class="fas fa-link"></i></a>
</h4>
<p>Scatter plots do not scale very well with hundreds or thousand of points. When the scatter plot becomes a gross mass of points, we need to find a better way to display those data. One solution to this is to create a heatmap of our points. You can think of a heatmap as the two-dimension equivalent to the histogram.</p>
<p>The heatmap “divides the plane into rectangles [of equal size], counts the number of cases in each rectangle”, and then that count is then used to color the rectangle<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;&lt;code&gt;geom_bin2d()&lt;/code&gt;. &lt;a href="https://ggplot2.tidyverse.org/reference/geom_bin2d.html" class="uri"&gt;https://ggplot2.tidyverse.org/reference/geom_bin2d.html&lt;/a&gt;&lt;/p&gt;'><sup>62</sup></a>. An alternative to the rectangular heatmap is the hexagonal heatmap. The hexagonal heatmap has a few minor visual benefits over the rectangular heatmap. But choosing which one is better suited to the task it up to you!</p>
<p>The geoms to create these heatmaps are</p>
<ul>
<li><p><code><a href="https://ggplot2.tidyverse.org/reference/geom_bin2d.html">geom_bin2d()</a></code> for creating the rectangular heatmap and</p></li>
<li><p><code><a href="https://ggplot2.tidyverse.org/reference/geom_hex.html">geom_hex()</a></code> for a hexagonal heatmap.</p></li>
<li><p>Convert the above scatter plot into a heat map using both above geoms.</p></li>
</ul>
<div class="sourceCode" id="cb203"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">acs</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">fam_house_per</span>, <span class="va">age_u18</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bin2d.html">geom_bin2d</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="04b-visualization-strategies_files/figure-html/unnamed-chunk-16-1.png" width="672"></div>
<div class="sourceCode" id="cb204"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">acs</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">fam_house_per</span>, <span class="va">age_u18</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_hex.html">geom_hex</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="04b-visualization-strategies_files/figure-html/unnamed-chunk-17-1.png" width="672"></div>
<p>Just like a histogram we can determine the number of bins that are used for aggragating the data. By adjusting the <code>bins</code> argument to <code><a href="https://ggplot2.tidyverse.org/reference/geom_hex.html">geom_hex()</a></code> or <code><a href="https://ggplot2.tidyverse.org/reference/geom_bin2d.html">geom_bin2d()</a></code> we can alter the size of each hexagon or rectangle. Again, the decision of how many bins to include is a trade-off between interpretability and accurate representation of the underlying data.</p>
<ul>
<li>Set the number of <code>bins</code> to 20</li>
</ul>
<div class="sourceCode" id="cb205"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">acs</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">fam_house_per</span>, <span class="va">age_u18</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_hex.html">geom_hex</a></span><span class="op">(</span>bins <span class="op">=</span> <span class="fl">20</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="04b-visualization-strategies_files/figure-html/unnamed-chunk-18-1.png" width="672"></div>
</div>
</div>
<div id="one-numeric-and-one-categorical" class="section level3" number="19.2.2">
<h3>
<span class="header-section-number">19.2.2</span> One numeric and one categorical<a class="anchor" aria-label="anchor" href="#one-numeric-and-one-categorical"><i class="fas fa-link"></i></a>
</h3>
<p>The next type of bivariate relationship we will encounter is that between a numeric variable and a categorical variable. In general there are two lines of inquiry we might take. The first is similar to our approach of a single numeric variable where we are interested in measures of centrality and spread but are further interested in how those characteristics change by category (or group membership). The second seeks to compare groups based on some aggregate measure of a numeric variable.</p>
<p>As an example, imagine we are interested in evaluating the educational attainment rate by county in the Greater Boston Area. We can take the approach of ranking the educational attainment rate by the median or average. Or, we could also try and evaluate if the counties differ in the amount of variation.</p>
<div class="sourceCode" id="cb206"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">gba_acs</span> <span class="op">&lt;-</span> <span class="va">acs</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/chartr.html">toupper</a></span><span class="op">(</span><span class="va">county</span><span class="op">)</span> <span class="op">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"SUFFOLK COUNTY"</span>, <span class="st">"NORFOLK COUNTY"</span>, <span class="st">"MIDDLESEX COUNTY"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>We will explore different techniques for addressing both lines of inqury.</p>
<div id="ridgelines" class="section level4" number="19.2.2.1">
<h4>
<span class="header-section-number">19.2.2.1</span> Ridgelines<a class="anchor" aria-label="anchor" href="#ridgelines"><i class="fas fa-link"></i></a>
</h4>
<p>Ridgelines are a wonderful method for visualizing the distribution of a numeric variable for each level in a categorical variable. Ridgeline plot a density curve for each level in your categorical variable and stacks them vertically. In doing so, we have a rather comfortable way to assess the shape of each level’s distribution.</p>
<p>To plot a ridgeline, we need to install the package <code>ggridges</code> and use the function <code><a href="https://wilkelab.org/ggridges/reference/geom_density_ridges.html">ggridges::geom_density_ridges()</a></code>.</p>
<blockquote>
<p>Reminders: install packages with <code><a href="https://rdrr.io/r/utils/install.packages.html">install.packages("pkg-name")</a></code>. The expression <code><a href="https://wilkelab.org/ggridges/reference/geom_density_ridges.html">ggridges::geom_density_ridges()</a></code> is used for referencing an exported function from a namespace (package name). The syntax is <em><code>pkgname::function()</code></em>.</p>
</blockquote>
<div class="sourceCode" id="cb207"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">gba_acs</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">bach</span>, <span class="va">county</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">ggridges</span><span class="fu">::</span><span class="fu"><a href="https://wilkelab.org/ggridges/reference/geom_density_ridges.html">geom_density_ridges</a></span><span class="op">(</span><span class="op">)</span> </code></pre></div>
<div class="inline-figure"><img src="04b-visualization-strategies_files/figure-html/unnamed-chunk-20-1.png" width="672"></div>
<p>The ridgeline plot very clearly illustrates the differences in distributions within the <code>county</code> variable. From this plot, we can tell that Suffolk County has rather extreme variation in the Bachelor’s degree attainment rate. And when compared to Norfolk and Middlesex counties, it becomes apparent that the median Suffolk County attainment rate falls almost 20% lower.</p>
<p>A plot such as the above may lead one to investigate further. Suffolk County is large and contains every single neighborhood of Boston from Back Bay, to Mission Hill, and Roxbury. We can drill down further into Suffolk County by identifying income percentiles and plotting those as well.</p>
<div class="inline-figure"><img src="04b-visualization-strategies_files/figure-html/unnamed-chunk-21-1.png" width="672"></div>
<p>Ridgelines are the perfect tool for exploring changes in variation among different groups. Before you run an ANOVA visualize the variation of your variables with a ridgeline plot first!</p>
</div>
<div id="boxplot" class="section level4" number="19.2.2.2">
<h4>
<span class="header-section-number">19.2.2.2</span> Boxplot<a class="anchor" aria-label="anchor" href="#boxplot"><i class="fas fa-link"></i></a>
</h4>
<p>It’s time to come back to the boxplot. The boxplot is indeed wonderful for a single variable. But much in the same way that multiple density plots is what makes the ridgeline fantastic, so does multiple box plots!</p>
<p>Again, when using the boxplot we are not as concerned about the <em>shape</em> of the distribution but rather <em>where</em> the data are. The boxplot is extremely useful for identifying skewness and potential outliers.</p>
<p>We can look at the distribution of educational attainment using a boxplot just like above. The only difference is the use of the <code><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot()</a></code>.</p>
<div class="sourceCode" id="cb208"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">gba_acs</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">bach</span>, <span class="va">county</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="04b-visualization-strategies_files/figure-html/unnamed-chunk-22-1.png" width="672"></div>
</div>
<div id="barchart-1" class="section level4" number="19.2.2.3">
<h4>
<span class="header-section-number">19.2.2.3</span> Barchart<a class="anchor" aria-label="anchor" href="#barchart-1"><i class="fas fa-link"></i></a>
</h4>
<p>We’ve already used the barchart to plot counts of categorical variables. But they are also useful for visualizing summary values of each categorical variable.</p>
<p>For example, if we were to plot the number of observations per county we can use our knowledge of <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code> to recreate the values.</p>
<div class="sourceCode" id="cb209"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">county_counts</span> <span class="op">&lt;-</span> <span class="va">acs</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">county</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; `summarise()` ungrouping output (override with `.groups` argument)</span>

<span class="va">county_counts</span>
<span class="co">#&gt; # A tibble: 14 x 2</span>
<span class="co">#&gt;    county                n</span>
<span class="co">#&gt;    &lt;chr&gt;             &lt;int&gt;</span>
<span class="co">#&gt;  1 Barnstable County    49</span>
<span class="co">#&gt;  2 Berkshire County     38</span>
<span class="co">#&gt;  3 Bristol County      116</span>
<span class="co">#&gt;  4 Dukes County          4</span>
<span class="co">#&gt;  5 Essex County        151</span>
<span class="co">#&gt;  6 Franklin County      17</span>
<span class="co">#&gt;  7 Hampden County       89</span>
<span class="co">#&gt;  8 Hampshire County     30</span>
<span class="co">#&gt;  9 Middlesex County    283</span>
<span class="co">#&gt; 10 Nantucket County      2</span>
<span class="co">#&gt; 11 Norfolk County      115</span>
<span class="co">#&gt; 12 Plymouth County      89</span>
<span class="co">#&gt; 13 Suffolk County      168</span>
<span class="co">#&gt; 14 Worcester County    160</span></code></pre></div>
<p>Now that we’ve counted the number of points per value, we can plot that using either <code><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar()</a></code> and setting <code>stat = "identity"</code> <em>or</em> we can use <code><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col()</a></code>. I prefer the latter.</p>
<div class="sourceCode" id="cb210"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">county_counts</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">n</span>, <span class="va">county</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="04b-visualization-strategies_files/figure-html/unnamed-chunk-24-1.png" width="672"></div>
<p>Here’s the thing, barcharts, and horizontal barcharts in particular are phenomenal for ranking. But ggplot2 doesn’t order the bars for us. We need to do that on our own. To do so, we will use our knowledge of <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code> and a new function <code><a href="https://forcats.tidyverse.org/reference/fct_reorder.html">forcats::fct_reorder()</a></code>.</p>
<p><code>fct_reorder()</code> is a function used for reordering categorical variables by some other numeric variable. In our case, we want to reorder <code>county</code> by <code>n</code>. So, within a <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code> function call we will alter <code>county</code> to be the value of the output <code>fct_reorder(county, n)</code>.</p>
<blockquote>
<p>If you are confused by <code>fct_reorder()</code>, remember to check out the help documentation with <code>?fct_reorder()</code>.</p>
</blockquote>
<p>The modified <code>county_counts</code> tibble can then be piped into our <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code>.</p>
<div class="sourceCode" id="cb211"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">county_counts</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>county <span class="op">=</span> <span class="fu">fct_reorder</span><span class="op">(</span><span class="va">county</span>, <span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">n</span>, <span class="va">county</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="04b-visualization-strategies_files/figure-html/unnamed-chunk-25-1.png" width="672"></div>
<p>This is a pattern that you will follow rather frequently—particularly when you need to rank variables. Now knowing the number of observations is useful, but we really want to use the barchart for visualizing some value of importance. Let’s continue the example of educational attainment but for the entirety of Massachusetts this time.</p>
<ul>
<li>Using <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code> and <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code>, calculate the median Bachelor degree attainment rate and call that column <code>med_bach</code>.</li>
<li>Reorder <code>county</code> by <code>avg_bach</code>
</li>
<li>Create an ordered horizontal barchart of <code>avg_bach</code> by <code>county</code>.</li>
</ul>
<div class="sourceCode" id="cb212"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">acs</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">county</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>med_bach <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">bach</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>county <span class="op">=</span> <span class="fu">fct_reorder</span><span class="op">(</span><span class="va">county</span>, <span class="va">med_bach</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">med_bach</span>, <span class="va">county</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; `summarise()` ungrouping output (override with `.groups` argument)</span></code></pre></div>
<div class="inline-figure"><img src="04b-visualization-strategies_files/figure-html/unnamed-chunk-26-1.png" width="672"></div>
<p>This brings us very naturally to our next type of plot: the lollipop plot.</p>
</div>
<div id="lollipop-plot" class="section level4" number="19.2.2.4">
<h4>
<span class="header-section-number">19.2.2.4</span> Lollipop plot<a class="anchor" aria-label="anchor" href="#lollipop-plot"><i class="fas fa-link"></i></a>
</h4>
<p>The lollipop plot is the barchart’s more fun cousin. Rather than a big thick bar we plot the summary value with a big point and draw a thin line back to it’s respective axis’ intercept. We can either manually create the lollipop using a creative combination of geoms, or use a geom incorporated in another package. I will almost always recommend that you don’t recreate something if you do not have to. As such, we will use the <code><a href="https://rdrr.io/pkg/ggalt/man/geom_lollipop.html">ggalt::geom_lollipop()</a></code> function.</p>
<blockquote>
<p>Remember: <em><code>pkgname::function()</code></em>. If you do not have <code>pkgname</code> installed, install it with <code><a href="https://rdrr.io/r/utils/install.packages.html">install.packages("pkgname")</a></code>.</p>
</blockquote>
<p>We can copy our previous barplot code and only replace the geom to produce a lollipop plot! Since we are keeping <code>med_bach</code> in the x position we will need to specify <code>horizontal = TRUE</code> in <code>geom_lollipop()</code>. This is a quirk of the geom but an easy one to get past. I recommend setting <code>horizontal = FALSE</code> to get a firmer understanding of what is happening. There is nothing quite like purposefully breaking your code to figure out what is happening!</p>
<div class="sourceCode" id="cb213"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">acs</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">county</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>med_bach <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">bach</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>county <span class="op">=</span> <span class="fu">fct_reorder</span><span class="op">(</span><span class="va">county</span>, <span class="va">med_bach</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">med_bach</span>, <span class="va">county</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">ggalt</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/ggalt/man/geom_lollipop.html">geom_lollipop</a></span><span class="op">(</span>horizontal <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="04b-visualization-strategies_files/figure-html/unnamed-chunk-27-1.png" width="672"></div>
</div>
</div>
</div>
<div id="review" class="section level2" number="19.3">
<h2>
<span class="header-section-number">19.3</span> Review:<a class="anchor" aria-label="anchor" href="#review"><i class="fas fa-link"></i></a>
</h2>
<p>You’ve now built up a repetoire of different types of visualizations that you can use in your own analyses. You’ve built an intuition of what types of visualization are suitable given the types of variables at your disposal.</p>
<p>In the next chapter we will explore ways of improving upon the plots that we already know how to build. We will explore further the <em>Layered Grammar of Graphics</em> how how to improve upon our charts using scales, and facets, and breifly touch upon coordinates.</p>

</div>
</div>

  <div class="chapter-nav">
<div class="prev"><a href="layered-i.html"><span class="header-section-number">18</span> Grammar of layered graphics I</a></div>
<div class="next"><a href="grammer-of-layered-graphics-ii.html"><span class="header-section-number">20</span> Grammer of layered graphics II</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#visualizing-trends-and-relationships"><span class="header-section-number">19</span> Visualizing Trends and Relationships</a></li>
<li>
<a class="nav-link" href="#univariate-visualizations"><span class="header-section-number">19.1</span> Univariate visualizations</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#histogram"><span class="header-section-number">19.1.1</span> Histogram</a></li>
<li><a class="nav-link" href="#density-function-plot"><span class="header-section-number">19.1.2</span> Density Function plot</a></li>
<li><a class="nav-link" href="#boxplots"><span class="header-section-number">19.1.3</span> Boxplots</a></li>
<li><a class="nav-link" href="#empirical-cumulative-distribution-function-ecdf"><span class="header-section-number">19.1.4</span> Empirical Cumulative Distribution Function (ECDF)</a></li>
<li><a class="nav-link" href="#barchart"><span class="header-section-number">19.1.5</span> Barchart</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#bivariate-visualizations"><span class="header-section-number">19.2</span> Bivariate visualizations</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#two-numeric-variables"><span class="header-section-number">19.2.1</span> Two Numeric Variables</a></li>
<li><a class="nav-link" href="#one-numeric-and-one-categorical"><span class="header-section-number">19.2.2</span> One numeric and one categorical</a></li>
</ul>
</li>
<li><a class="nav-link" href="#review"><span class="header-section-number">19.3</span> Review:</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Urban Informatics Toolkit</strong>" was written by Josiah Parry. It was last built on 2020-12-12.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>
</html>
