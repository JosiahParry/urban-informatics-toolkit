<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 23 Visualizing through time | Urban Informatics Toolkit</title>
  <meta name="description" content="A hands on introduction approach to analyzing the urban Commons." />
  <meta name="generator" content="bookdown 0.18 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 23 Visualizing through time | Urban Informatics Toolkit" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="A hands on introduction approach to analyzing the urban Commons." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 23 Visualizing through time | Urban Informatics Toolkit" />
  
  <meta name="twitter:description" content="A hands on introduction approach to analyzing the urban Commons." />
  

<meta name="author" content="Josiah Parry" />


<meta name="date" content="2020-04-20" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="visualizing-beyond-2-dimensions.html"/>
<link rel="next" href="visualization-review.html"/>
<script src="libs/header-attrs-2.1/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Urban Informatics Toolkit</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Welcome!</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#structure-of-the-book"><i class="fa fa-check"></i><b>1.1</b> Structure of the book</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#considerations"><i class="fa fa-check"></i><b>1.2</b> Considerations</a></li>
</ul></li>
<li class="part"><span><b>I Foundations of Urban Informatics</b></span></li>
<li class="chapter" data-level="2" data-path="the-utility-and-danger-of-big-data.html"><a href="the-utility-and-danger-of-big-data.html"><i class="fa fa-check"></i><b>2</b> The Utility and Danger of Big Data</a></li>
<li class="chapter" data-level="3" data-path="data-in-the-municipal-context.html"><a href="data-in-the-municipal-context.html"><i class="fa fa-check"></i><b>3</b> Data in the municipal context</a></li>
<li class="chapter" data-level="4" data-path="approaches-to-and-schools-of-urban-informatics.html"><a href="approaches-to-and-schools-of-urban-informatics.html"><i class="fa fa-check"></i><b>4</b> Approaches to and Schools of Urban Informatics</a>
<ul>
<li class="chapter" data-level="4.1" data-path="approaches-to-and-schools-of-urban-informatics.html"><a href="approaches-to-and-schools-of-urban-informatics.html#scientific-approaches"><i class="fa fa-check"></i><b>4.1</b> Scientific approaches</a></li>
<li class="chapter" data-level="4.2" data-path="approaches-to-and-schools-of-urban-informatics.html"><a href="approaches-to-and-schools-of-urban-informatics.html#the-chicago-school"><i class="fa fa-check"></i><b>4.2</b> The Chicago School</a></li>
<li class="chapter" data-level="4.3" data-path="approaches-to-and-schools-of-urban-informatics.html"><a href="approaches-to-and-schools-of-urban-informatics.html#complexity-and-santa-fe-institute"><i class="fa fa-check"></i><b>4.3</b> Complexity and Santa Fe Institute</a></li>
<li class="chapter" data-level="4.4" data-path="approaches-to-and-schools-of-urban-informatics.html"><a href="approaches-to-and-schools-of-urban-informatics.html#a-hybrid-approach"><i class="fa fa-check"></i><b>4.4</b> A Hybrid Approach</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="ecometrics.html"><a href="ecometrics.html"><i class="fa fa-check"></i><b>5</b> Ecometrics</a>
<ul>
<li class="chapter" data-level="5.1" data-path="ecometrics.html"><a href="ecometrics.html#broken-windows-theory"><i class="fa fa-check"></i><b>5.1</b> Broken Windows Theory</a></li>
<li class="chapter" data-level="5.2" data-path="ecometrics.html"><a href="ecometrics.html#quantifying-disorder"><i class="fa fa-check"></i><b>5.2</b> Quantifying Disorder</a></li>
</ul></li>
<li class="part"><span><b>II Toolkit Foundations</b></span></li>
<li class="chapter" data-level="6" data-path="the-basics.html"><a href="the-basics.html"><i class="fa fa-check"></i><b>6</b> The basics</a>
<ul>
<li class="chapter" data-level="6.1" data-path="the-basics.html"><a href="the-basics.html#what-is-r-and-why-do-i-care"><i class="fa fa-check"></i><b>6.1</b> What is R and why do I care?</a></li>
<li class="chapter" data-level="6.2" data-path="the-basics.html"><a href="the-basics.html#the-rstudio-ide"><i class="fa fa-check"></i><b>6.2</b> The RStudio IDE</a></li>
<li class="chapter" data-level="6.3" data-path="the-basics.html"><a href="the-basics.html#installing-r-rstudio"><i class="fa fa-check"></i><b>6.3</b> Installing R &amp; RStudio</a></li>
<li class="chapter" data-level="6.4" data-path="the-basics.html"><a href="the-basics.html#preventative-care"><i class="fa fa-check"></i><b>6.4</b> Preventative Care</a></li>
<li class="chapter" data-level="6.5" data-path="the-basics.html"><a href="the-basics.html#before-we-embark"><i class="fa fa-check"></i><b>6.5</b> Before we embark</a></li>
<li class="chapter" data-level="6.6" data-path="the-basics.html"><a href="the-basics.html#getting-help"><i class="fa fa-check"></i><b>6.6</b> Getting Help</a></li>
<li class="chapter" data-level="6.7" data-path="the-basics.html"><a href="the-basics.html#reminders"><i class="fa fa-check"></i><b>6.7</b> Reminders</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="r-as-a-calculator.html"><a href="r-as-a-calculator.html"><i class="fa fa-check"></i><b>7</b> R as a calculator</a>
<ul>
<li class="chapter" data-level="7.1" data-path="r-as-a-calculator.html"><a href="r-as-a-calculator.html#arithmetic-operators"><i class="fa fa-check"></i><b>7.1</b> Arithmetic Operators</a></li>
<li class="chapter" data-level="7.2" data-path="r-as-a-calculator.html"><a href="r-as-a-calculator.html#variable-assignment"><i class="fa fa-check"></i><b>7.2</b> Variable assignment</a></li>
<li class="chapter" data-level="7.3" data-path="r-as-a-calculator.html"><a href="r-as-a-calculator.html#functions"><i class="fa fa-check"></i><b>7.3</b> Functions</a></li>
<li class="chapter" data-level="7.4" data-path="r-as-a-calculator.html"><a href="r-as-a-calculator.html#extensions-to-r"><i class="fa fa-check"></i><b>7.4</b> Extensions to R</a></li>
<li class="chapter" data-level="7.5" data-path="r-as-a-calculator.html"><a href="r-as-a-calculator.html#loading-packages"><i class="fa fa-check"></i><b>7.5</b> Loading Packages</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="whats-next.html"><a href="whats-next.html"><i class="fa fa-check"></i><b>8</b> What‚Äôs next?</a></li>
<li class="chapter" data-level="9" data-path="reading-data.html"><a href="reading-data.html"><i class="fa fa-check"></i><b>9</b> Reading data</a>
<ul>
<li class="chapter" data-level="9.1" data-path="reading-data.html"><a href="reading-data.html#background"><i class="fa fa-check"></i><b>9.1</b> Background</a></li>
<li class="chapter" data-level="9.2" data-path="reading-data.html"><a href="reading-data.html#actually-reading-data"><i class="fa fa-check"></i><b>9.2</b> Actually Reading Data</a></li>
<li class="chapter" data-level="9.3" data-path="reading-data.html"><a href="reading-data.html#other-common-data-formats"><i class="fa fa-check"></i><b>9.3</b> Other common data formats</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="exploratory-visual-analysis.html"><a href="exploratory-visual-analysis.html"><i class="fa fa-check"></i><b>10</b> Exploratory Visual Analysis</a>
<ul>
<li class="chapter" data-level="10.1" data-path="exploratory-visual-analysis.html"><a href="exploratory-visual-analysis.html#the-american-community-survey"><i class="fa fa-check"></i><b>10.1</b> The American Community Survey</a></li>
<li class="chapter" data-level="10.2" data-path="exploratory-visual-analysis.html"><a href="exploratory-visual-analysis.html#a-first-visualization"><i class="fa fa-check"></i><b>10.2</b> A first visualization</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="general-data-manipulation.html"><a href="general-data-manipulation.html"><i class="fa fa-check"></i><b>11</b> General data manipulation</a>
<ul>
<li class="chapter" data-level="11.1" data-path="general-data-manipulation.html"><a href="general-data-manipulation.html#scenario"><i class="fa fa-check"></i><b>11.1</b> Scenario</a></li>
<li class="chapter" data-level="11.2" data-path="general-data-manipulation.html"><a href="general-data-manipulation.html#getting-physical-with-the-data"><i class="fa fa-check"></i><b>11.2</b> Getting physical with the data</a></li>
<li class="chapter" data-level="11.3" data-path="general-data-manipulation.html"><a href="general-data-manipulation.html#selecting-rows"><i class="fa fa-check"></i><b>11.3</b> Selecting Rows</a></li>
<li class="chapter" data-level="11.4" data-path="general-data-manipulation.html"><a href="general-data-manipulation.html#revisiting-commmuting"><i class="fa fa-check"></i><b>11.4</b> Revisiting commmuting</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="thats-too-much-data.html"><a href="thats-too-much-data.html"><i class="fa fa-check"></i><b>12</b> That‚Äôs <em>too much</em> data</a>
<ul>
<li class="chapter" data-level="12.1" data-path="thats-too-much-data.html"><a href="thats-too-much-data.html#filtering"><i class="fa fa-check"></i><b>12.1</b> <code>filter()</code>ing</a></li>
<li class="chapter" data-level="12.2" data-path="thats-too-much-data.html"><a href="thats-too-much-data.html#logical-operators"><i class="fa fa-check"></i><b>12.2</b> Logical operators</a></li>
<li class="chapter" data-level="12.3" data-path="thats-too-much-data.html"><a href="thats-too-much-data.html#defining-the-greater-boston-area"><i class="fa fa-check"></i><b>12.3</b> Defining the Greater Boston Area</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="the-pipe.html"><a href="the-pipe.html"><i class="fa fa-check"></i><b>13</b> The pipe <code>%&gt;%</code></a>
<ul>
<li class="chapter" data-level="13.1" data-path="the-pipe.html"><a href="the-pipe.html#applying-the-pipe."><i class="fa fa-check"></i><b>13.1</b> Applying the pipe.</a></li>
<li class="chapter" data-level="13.2" data-path="the-pipe.html"><a href="the-pipe.html#revisiting-our-scenario"><i class="fa fa-check"></i><b>13.2</b> Revisiting our scenario</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="creating-new-measures.html"><a href="creating-new-measures.html"><i class="fa fa-check"></i><b>14</b> Creating new measures</a></li>
<li class="chapter" data-level="15" data-path="data-structures.html"><a href="data-structures.html"><i class="fa fa-check"></i><b>15</b> Data Structures</a>
<ul>
<li class="chapter" data-level="15.1" data-path="data-structures.html"><a href="data-structures.html#atomic-vectors"><i class="fa fa-check"></i><b>15.1</b> Atomic Vectors</a></li>
<li class="chapter" data-level="15.2" data-path="data-structures.html"><a href="data-structures.html#data-frames"><i class="fa fa-check"></i><b>15.2</b> Data Frames</a></li>
<li class="chapter" data-level="15.3" data-path="data-structures.html"><a href="data-structures.html#lists"><i class="fa fa-check"></i><b>15.3</b> Lists</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="summary-statistics.html"><a href="summary-statistics.html"><i class="fa fa-check"></i><b>16</b> Summary statistics</a></li>
<li class="chapter" data-level="17" data-path="summarizing-the-tidy-way.html"><a href="summarizing-the-tidy-way.html"><i class="fa fa-check"></i><b>17</b> Summarizing the tidy way</a></li>
<li class="chapter" data-level="18" data-path="toolkit-review.html"><a href="toolkit-review.html"><i class="fa fa-check"></i><b>18</b> Toolkit review</a></li>
<li class="part"><span><b>III Vizualization Strategies</b></span></li>
<li class="chapter" data-level="19" data-path="layered-i.html"><a href="layered-i.html"><i class="fa fa-check"></i><b>19</b> Grammer of layered graphics I</a>
<ul>
<li class="chapter" data-level="19.1" data-path="layered-i.html"><a href="layered-i.html#the-grammar-of-layered-graphics"><i class="fa fa-check"></i><b>19.1</b> The Grammar of Layered Graphics</a></li>
<li class="chapter" data-level="19.2" data-path="layered-i.html"><a href="layered-i.html#layers-and-defaults"><i class="fa fa-check"></i><b>19.2</b> Layers and defaults</a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="visualizing-trends-and-relationships.html"><a href="visualizing-trends-and-relationships.html"><i class="fa fa-check"></i><b>20</b> Visualizing Trends and Relationships</a>
<ul>
<li class="chapter" data-level="20.1" data-path="visualizing-trends-and-relationships.html"><a href="visualizing-trends-and-relationships.html#univariate-visualizations"><i class="fa fa-check"></i><b>20.1</b> Univariate visualizations</a></li>
<li class="chapter" data-level="20.2" data-path="visualizing-trends-and-relationships.html"><a href="visualizing-trends-and-relationships.html#bivariate-visualizations"><i class="fa fa-check"></i><b>20.2</b> Bivariate visualizations</a></li>
<li class="chapter" data-level="20.3" data-path="visualizing-trends-and-relationships.html"><a href="visualizing-trends-and-relationships.html#review"><i class="fa fa-check"></i><b>20.3</b> Review:</a></li>
</ul></li>
<li class="chapter" data-level="21" data-path="grammer-of-layered-graphics-ii.html"><a href="grammer-of-layered-graphics-ii.html"><i class="fa fa-check"></i><b>21</b> Grammer of layered graphics II</a>
<ul>
<li class="chapter" data-level="21.1" data-path="grammer-of-layered-graphics-ii.html"><a href="grammer-of-layered-graphics-ii.html#scales"><i class="fa fa-check"></i><b>21.1</b> Scales</a></li>
<li class="chapter" data-level="21.2" data-path="grammer-of-layered-graphics-ii.html"><a href="grammer-of-layered-graphics-ii.html#coordinates"><i class="fa fa-check"></i><b>21.2</b> Coordinates</a></li>
<li class="chapter" data-level="21.3" data-path="grammer-of-layered-graphics-ii.html"><a href="grammer-of-layered-graphics-ii.html#facets"><i class="fa fa-check"></i><b>21.3</b> Facets</a></li>
</ul></li>
<li class="chapter" data-level="22" data-path="visualizing-beyond-2-dimensions.html"><a href="visualizing-beyond-2-dimensions.html"><i class="fa fa-check"></i><b>22</b> Visualizing beyond 2-dimensions</a>
<ul>
<li class="chapter" data-level="22.1" data-path="visualizing-beyond-2-dimensions.html"><a href="visualizing-beyond-2-dimensions.html#color"><i class="fa fa-check"></i><b>22.1</b> Color</a></li>
<li class="chapter" data-level="22.2" data-path="visualizing-beyond-2-dimensions.html"><a href="visualizing-beyond-2-dimensions.html#shape-and-size"><i class="fa fa-check"></i><b>22.2</b> Shape and Size</a></li>
</ul></li>
<li class="chapter" data-level="23" data-path="visualizing-through-time.html"><a href="visualizing-through-time.html"><i class="fa fa-check"></i><b>23</b> Visualizing through time</a>
<ul>
<li class="chapter" data-level="23.1" data-path="visualizing-through-time.html"><a href="visualizing-through-time.html#working-with-dates"><i class="fa fa-check"></i><b>23.1</b> Working with dates</a></li>
<li class="chapter" data-level="23.2" data-path="visualizing-through-time.html"><a href="visualizing-through-time.html#standard-visual-approach"><i class="fa fa-check"></i><b>23.2</b> Standard visual approach</a></li>
<li class="chapter" data-level="23.3" data-path="visualizing-through-time.html"><a href="visualizing-through-time.html#animation-as-time"><i class="fa fa-check"></i><b>23.3</b> Animation as time</a></li>
</ul></li>
<li class="chapter" data-level="24" data-path="visualization-review.html"><a href="visualization-review.html"><i class="fa fa-check"></i><b>24</b> Visualization Review</a></li>
<li class="part"><span><b>IV More than hammer and nails</b></span></li>
<li class="chapter" data-level="25" data-path="multiple-data-sets.html"><a href="multiple-data-sets.html"><i class="fa fa-check"></i><b>25</b> Multiple data sets</a>
<ul>
<li class="chapter" data-level="25.1" data-path="multiple-data-sets.html"><a href="multiple-data-sets.html#exercise-2"><i class="fa fa-check"></i><b>25.1</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="26" data-path="statistics.html"><a href="statistics.html"><i class="fa fa-check"></i><b>26</b> Statistics</a>
<ul>
<li class="chapter" data-level="26.1" data-path="statistics.html"><a href="statistics.html#the-data"><i class="fa fa-check"></i><b>26.1</b> The data</a></li>
<li class="chapter" data-level="26.2" data-path="statistics.html"><a href="statistics.html#the-formula-interface"><i class="fa fa-check"></i><b>26.2</b> The formula interface</a></li>
<li class="chapter" data-level="26.3" data-path="statistics.html"><a href="statistics.html#t-tests"><i class="fa fa-check"></i><b>26.3</b> T-tests</a></li>
<li class="chapter" data-level="26.4" data-path="statistics.html"><a href="statistics.html#anova"><i class="fa fa-check"></i><b>26.4</b> ANOVA</a></li>
<li class="chapter" data-level="26.5" data-path="statistics.html"><a href="statistics.html#linear-regression"><i class="fa fa-check"></i><b>26.5</b> Linear regression</a></li>
</ul></li>
<li class="chapter" data-level="27" data-path="spatial-analysis.html"><a href="spatial-analysis.html"><i class="fa fa-check"></i><b>27</b> Spatial Analysis</a>
<ul>
<li class="chapter" data-level="27.1" data-path="spatial-analysis.html"><a href="spatial-analysis.html#types-of-spatial-data"><i class="fa fa-check"></i><b>27.1</b> Types of spatial data</a></li>
<li class="chapter" data-level="27.2" data-path="spatial-analysis.html"><a href="spatial-analysis.html#working-with-spatial-data"><i class="fa fa-check"></i><b>27.2</b> Working with spatial data</a></li>
<li class="chapter" data-level="27.3" data-path="spatial-analysis.html"><a href="spatial-analysis.html#creating-simple-features-from-a-tibble"><i class="fa fa-check"></i><b>27.3</b> Creating simple features from a tibble</a></li>
<li class="chapter" data-level="27.4" data-path="spatial-analysis.html"><a href="spatial-analysis.html#plotting-sf-objects-with-ggplot"><i class="fa fa-check"></i><b>27.4</b> Plotting sf objects with ggplot</a></li>
<li class="chapter" data-level="27.5" data-path="spatial-analysis.html"><a href="spatial-analysis.html#connecting-points-to-polygons"><i class="fa fa-check"></i><b>27.5</b> Connecting points to polygons</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/josiahparry/urban-informatics-toolkit" target="blank">GitHub</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Urban Informatics Toolkit</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="visualizing-through-time" class="section level1" number="23">
<h1><span class="header-section-number">Chapter 23</span> Visualizing through time</h1>
<p>Throughout this section, one type of visualization has been missing from our repetoire‚Äîthe timeseries plot. This is because time series data is rather cumbersome to work with. Time series are unique because each observation represents some point in time. There is order inherent to the data. Because of this natural ordering of the data it makes the problem a bit trickier. But now that we have the visual tools and principles sorted out, we can apply them to time series data and visualize them as well.</p>
<p>For this section we will work with the 2014 Big Belly data again. Our goal will be to visualize the reports by fullness over the course of the year. In this chapter we will first learn how to work with dates. Then we will use our new skills to aggregate our observations and view them over time. Next, we will discuss traditional methods of time series visualization. And finally we will quickly touch on the use of animation for viewing time-series.</p>
<div id="working-with-dates" class="section level2" number="23.1">
<h2><span class="header-section-number">23.1</span> Working with dates</h2>
<p>The file that we will use is located at <code>data/big-belly-2014.csv</code>. Read in the dataset and assign it to the tibble <code>big_belly</code> and then preview it with <code>glimpse()</code>.</p>
<div class="sourceCode" id="cb245"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb245-1"><a href="visualizing-through-time.html#cb245-1"></a><span class="kw">library</span>(tidyverse)</span>
<span id="cb245-2"><a href="visualizing-through-time.html#cb245-2"></a></span>
<span id="cb245-3"><a href="visualizing-through-time.html#cb245-3"></a>big_belly &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;data/big-belly-2014.csv&quot;</span>)</span>
<span id="cb245-4"><a href="visualizing-through-time.html#cb245-4"></a></span>
<span id="cb245-5"><a href="visualizing-through-time.html#cb245-5"></a><span class="kw">glimpse</span>(big_belly)</span></code></pre></div>
<pre><code>## Rows: 51,440
## Columns: 6
## $ description &lt;chr&gt; &quot;Atlantic &amp; Milk&quot;, &quot;1330 Boylston @ Jersey Street&quot;, &quot;SE B‚Ä¶
## $ timestamp   &lt;dttm&gt; 2014-01-01 00:41:00, 2014-01-01 01:19:00, 2014-01-01 01:‚Ä¶
## $ fullness    &lt;chr&gt; &quot;YELLOW&quot;, &quot;YELLOW&quot;, &quot;YELLOW&quot;, &quot;RED&quot;, &quot;GREEN&quot;, &quot;YELLOW&quot;, &quot;‚Ä¶
## $ collection  &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, TRUE, TRUE, FALSE, TRUE, FALS‚Ä¶
## $ lat         &lt;dbl&gt; 42.35870, 42.34457, 42.34818, 42.34818, 42.34933, 42.3481‚Ä¶
## $ long        &lt;dbl&gt; -71.05144, -71.09783, -71.09744, -71.09744, -71.07702, -7‚Ä¶</code></pre>
<p>What we can see is that the data are rather large and contains a column with the type <code>&lt;dttm&gt;</code> which is new to us. <code>&lt;dttm&gt;</code> is the way that a tibble represents a column of the type date time.</p>
<blockquote>
<p>Note that the formal class for date time data is <code>POSIXct</code>. Working with date times with any computer is a tricky process.</p>
</blockquote>
<p>Date time objects follow the format of <code>YYYY-MM-DD HH:MM:SS</code> where <code>Y</code> is year, <code>M</code> month, <code>D</code> day, <code>H</code> hours, <code>M</code> minutes, and <code>S</code> seconds.</p>
<p>This begs the question ‚Äúhow can we aggregate based on time?‚Äù The easiest way to do this is to group our observations by some interval. To do this we will solicit the help of the package <a href="https://lubridate.tidyverse.org"><code>lubridate</code></a>. lubridate is part of the tidyverse, but it doesn‚Äôt loadwith the tidyverse. As such, we will have to load the package ourselves.</p>
<div class="sourceCode" id="cb247"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb247-1"><a href="visualizing-through-time.html#cb247-1"></a><span class="kw">library</span>(lubridate)</span></code></pre></div>
<pre><code>## 
## Attaching package: &#39;lubridate&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:dplyr&#39;:
## 
##     intersect, setdiff, union</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     date, intersect, setdiff, union</code></pre>
<p>The package contains dozens of useful functions for working with dates in R. By no means will we go over each of them.</p>
<blockquote>
<p>To explore all of the functions in a package click on the <code>Packages</code> pane and search for the package you are interested in. Click the hyper link with the package name and then all of the exported functions and objects <em>should</em> be documented there.</p>
</blockquote>
<p>We will, however quickly touch on <code>ymd()</code>, <code>month()</code>, and <code>floor_date()</code>.</p>
<p>The first is not useful in this example since <code>read_csv()</code> already parsed the column as a date time for us, but is important nonetheless. <code>ymd()</code> will convert a character string into a date object. The letters stand for <em>year</em>, <em>month</em>, and <em>date</em>. This function parses dates in the format of yup, you guessed it, year-month-day. For example:</p>
<div class="sourceCode" id="cb251"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb251-1"><a href="visualizing-through-time.html#cb251-1"></a><span class="kw">ymd</span>(<span class="st">&quot;2020 01 20&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2020-01-20&quot;</code></pre>
<div class="sourceCode" id="cb253"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb253-1"><a href="visualizing-through-time.html#cb253-1"></a><span class="kw">ymd</span>(<span class="st">&quot;2020 jan. 20&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2020-01-20&quot;</code></pre>
<div class="sourceCode" id="cb255"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb255-1"><a href="visualizing-through-time.html#cb255-1"></a><span class="kw">ymd</span>(<span class="st">&quot;20, january-20&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2020-01-20&quot;</code></pre>
<p>There are others such as <code>mdy()</code> and <code>dmy()</code> which you can use to parse dates as well.</p>
<blockquote>
<p>The next time you are trying to parse a date think about the way it is formatted. Does the year precede or follow the month?</p>
</blockquote>
<p>Immediately useful to us is the <code>month()</code> function. This will extract the month component of a given date.</p>
<div class="sourceCode" id="cb257"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb257-1"><a href="visualizing-through-time.html#cb257-1"></a><span class="kw">month</span>(<span class="st">&quot;2020-01-01&quot;</span>)</span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<p>The above returned the value of <code>1</code> because January is represented by 1. If we wished to return the full name of the month we set the argument <code>label = TRUE</code>.</p>
<div class="sourceCode" id="cb259"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb259-1"><a href="visualizing-through-time.html#cb259-1"></a><span class="kw">month</span>(<span class="st">&quot;2020-01-01&quot;</span>, <span class="dt">label =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<pre><code>## [1] Jan
## 12 Levels: Jan &lt; Feb &lt; Mar &lt; Apr &lt; May &lt; Jun &lt; Jul &lt; Aug &lt; Sep &lt; ... &lt; Dec</code></pre>
<p>Furthermore, we can tell lubridate to not abbreviate the months by setting <code>abbr = FALSE</code>.</p>
<div class="sourceCode" id="cb261"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb261-1"><a href="visualizing-through-time.html#cb261-1"></a><span class="kw">month</span>(<span class="st">&quot;2020-01-01&quot;</span>, <span class="dt">label =</span> <span class="ot">TRUE</span>, <span class="dt">abbr =</span> <span class="ot">FALSE</span>)</span></code></pre></div>
<pre><code>## [1] January
## 12 Levels: January &lt; February &lt; March &lt; April &lt; May &lt; June &lt; ... &lt; December</code></pre>
<p>We can use the above function to extract the months from our Big Belly dataset. This will be extremely useful in aggregation. The one limitation, however, is that if there were another year present we would be grouping observations from both years into the the same month bucket. To avoid this, we can use the function <code>floor_date()</code>. <code>floor_date()</code> takes a date object and returns the closest date rounding down to a given unit. This may be best explained through an example. Given the date March 15th, 2020, let us round down to the near units <code>"week"</code>, <code>"month"</code>, and <code>"year"</code>.</p>
<div class="sourceCode" id="cb263"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb263-1"><a href="visualizing-through-time.html#cb263-1"></a><span class="co"># create date object</span></span>
<span id="cb263-2"><a href="visualizing-through-time.html#cb263-2"></a>mar_<span class="dv">15</span> &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="st">&quot;2020-03-15&quot;</span>)</span>
<span id="cb263-3"><a href="visualizing-through-time.html#cb263-3"></a></span>
<span id="cb263-4"><a href="visualizing-through-time.html#cb263-4"></a><span class="co"># round to week</span></span>
<span id="cb263-5"><a href="visualizing-through-time.html#cb263-5"></a><span class="kw">floor_date</span>(mar_<span class="dv">15</span>, <span class="dt">unit =</span> <span class="st">&quot;week&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2020-03-15&quot;</code></pre>
<div class="sourceCode" id="cb265"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb265-1"><a href="visualizing-through-time.html#cb265-1"></a><span class="co"># round to month</span></span>
<span id="cb265-2"><a href="visualizing-through-time.html#cb265-2"></a><span class="kw">floor_date</span>(mar_<span class="dv">15</span>, <span class="dt">unit =</span> <span class="st">&quot;month&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2020-03-01&quot;</code></pre>
<div class="sourceCode" id="cb267"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb267-1"><a href="visualizing-through-time.html#cb267-1"></a><span class="co"># round to year</span></span>
<span id="cb267-2"><a href="visualizing-through-time.html#cb267-2"></a><span class="kw">floor_date</span>(mar_<span class="dv">15</span>, <span class="dt">unit =</span> <span class="st">&quot;year&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2020-01-01&quot;</code></pre>
<p>With these new tools lets modify our <code>big_belly</code> tibble by creating two new columns <code>month</code> (with the labels) and <code>week</code> using <code>month()</code> and <code>floor_date()</code> respectively and assign the result to an object called <code>bb</code>.</p>
<div class="sourceCode" id="cb269"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb269-1"><a href="visualizing-through-time.html#cb269-1"></a>bb &lt;-<span class="st"> </span>big_belly <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb269-2"><a href="visualizing-through-time.html#cb269-2"></a><span class="st">  </span><span class="kw">mutate</span>(</span>
<span id="cb269-3"><a href="visualizing-through-time.html#cb269-3"></a>    <span class="dt">month =</span> <span class="kw">month</span>(timestamp, <span class="dt">label =</span> <span class="ot">TRUE</span>),</span>
<span id="cb269-4"><a href="visualizing-through-time.html#cb269-4"></a>    <span class="dt">week =</span> <span class="kw">floor_date</span>(timestamp, <span class="dt">unit =</span> <span class="st">&quot;week&quot;</span>)</span>
<span id="cb269-5"><a href="visualizing-through-time.html#cb269-5"></a>  )</span>
<span id="cb269-6"><a href="visualizing-through-time.html#cb269-6"></a></span>
<span id="cb269-7"><a href="visualizing-through-time.html#cb269-7"></a><span class="kw">slice</span>(bb, <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>)</span></code></pre></div>
<pre><code>## # A tibble: 5 x 8
##   description timestamp           fullness collection   lat  long month
##   &lt;chr&gt;       &lt;dttm&gt;              &lt;chr&gt;    &lt;lgl&gt;      &lt;dbl&gt; &lt;dbl&gt; &lt;ord&gt;
## 1 Atlantic &amp;‚Ä¶ 2014-01-01 00:41:00 YELLOW   FALSE       42.4 -71.1 Jan  
## 2 1330 Boyls‚Ä¶ 2014-01-01 01:19:00 YELLOW   FALSE       42.3 -71.1 Jan  
## 3 SE Brookli‚Ä¶ 2014-01-01 01:32:00 YELLOW   FALSE       42.3 -71.1 Jan  
## 4 SE Brookli‚Ä¶ 2014-01-01 01:34:00 RED      FALSE       42.3 -71.1 Jan  
## 5 Huntington‚Ä¶ 2014-01-01 02:10:00 GREEN    TRUE        42.3 -71.1 Jan  
## # ‚Ä¶ with 1 more variable: week &lt;dttm&gt;</code></pre>
</div>
<div id="standard-visual-approach" class="section level2" number="23.2">
<h2><span class="header-section-number">23.2</span> Standard visual approach</h2>
<p>When we visualize time we need to consider how we humans cognitively and visually perceive time. Time is linear. It follow a path from start to end. Because of this we want to (almost) always plot our time dimension on the horizontal x axis as time proceeds forwards not up or down. Perhaps as a product of these restrictions there are not many variations on how we can visualize time. Two plots reign in time-series: the line and the bar plot.</p>
<p>We can take our <code>bb</code> tibble and create a barchart of the total number of observations per month.</p>
<div class="sourceCode" id="cb271"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb271-1"><a href="visualizing-through-time.html#cb271-1"></a><span class="kw">count</span>(bb, month) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb271-2"><a href="visualizing-through-time.html#cb271-2"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(month, n)) <span class="op">+</span></span>
<span id="cb271-3"><a href="visualizing-through-time.html#cb271-3"></a><span class="st">  </span><span class="kw">geom_col</span>()</span></code></pre></div>
<p><img src="04e-through-time_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
<p>We can add a few more characters to the above code chunk so we can compare fullness over the months as well.</p>
<div class="sourceCode" id="cb272"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb272-1"><a href="visualizing-through-time.html#cb272-1"></a><span class="kw">count</span>(bb, month, fullness) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb272-2"><a href="visualizing-through-time.html#cb272-2"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(month, n, <span class="dt">fill =</span> fullness)) <span class="op">+</span></span>
<span id="cb272-3"><a href="visualizing-through-time.html#cb272-3"></a><span class="st">  </span><span class="kw">geom_col</span>()</span></code></pre></div>
<p><img src="04e-through-time_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
<p>Before we continue, we have to address the elephant in the room. We just made a plot with a legend that makes no sense. <code>GREEN</code> is mapped to red, <code>RED</code> is mapped to green, and <code>YELLOW</code> is mapped to blue. That‚Äôs not good. We can fix this by adding manually mapping the color using one of the scale functions <code>scale_fill_manual(values = c("green", "red", "yellow"))</code>. Now back to the task at hand‚Äîtime series.</p>
<p>The stacked barchart above runs into the same limitations mentioned previously. And given the number of different time groups creating a dodged bar chart will become to cluttered by putting 36 total bars on there. We could consider faceting.</p>
<div class="sourceCode" id="cb273"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb273-1"><a href="visualizing-through-time.html#cb273-1"></a><span class="kw">count</span>(bb, month, fullness) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb273-2"><a href="visualizing-through-time.html#cb273-2"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(fullness, n, <span class="dt">group =</span> month)) <span class="op">+</span></span>
<span id="cb273-3"><a href="visualizing-through-time.html#cb273-3"></a><span class="st">  </span><span class="kw">geom_col</span>() <span class="op">+</span><span class="st"> </span></span>
<span id="cb273-4"><a href="visualizing-through-time.html#cb273-4"></a><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="st">&quot;month&quot;</span>)</span></code></pre></div>
<p><img src="04e-through-time_files/figure-html/unnamed-chunk-11-1.png" width="672" />
This is okay, but again, still too cluttered. In this scenario we should consider the use of a line graph. The line graph is the de facto time series plot. The lines connect points in time. Achieving this with ggplot is rather straight forward. We will put our time dimension on the x axis and add the <code>geom_line()</code> layer. By default <code>geom_line()</code> doesn‚Äôt know what points to connect to each other when there is more than one per x value. So in our case we need to tell ggplot which points to connect by setting the <code>group</code> aesthetic. Since we want to group together the lines by <code>fullness</code> level set <code>group</code> as well as <code>color</code> to <code>fullness</code>. We can step up the plotting game by also</p>
<div class="sourceCode" id="cb274"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb274-1"><a href="visualizing-through-time.html#cb274-1"></a><span class="kw">count</span>(bb, month, fullness) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb274-2"><a href="visualizing-through-time.html#cb274-2"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(month, n, <span class="dt">group =</span> fullness, <span class="dt">color =</span> fullness)) <span class="op">+</span></span>
<span id="cb274-3"><a href="visualizing-through-time.html#cb274-3"></a><span class="st">  </span><span class="kw">geom_line</span>()</span></code></pre></div>
<p><img src="04e-through-time_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
<p>We can step up our plotting game by also adding a layer of points on top of the line to accentuate our lines.</p>
<div class="sourceCode" id="cb275"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb275-1"><a href="visualizing-through-time.html#cb275-1"></a><span class="kw">count</span>(bb, month, fullness) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb275-2"><a href="visualizing-through-time.html#cb275-2"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(month, n, <span class="dt">group =</span> fullness, <span class="dt">color =</span> fullness)) <span class="op">+</span></span>
<span id="cb275-3"><a href="visualizing-through-time.html#cb275-3"></a><span class="st">  </span><span class="kw">geom_line</span>() <span class="op">+</span><span class="st"> </span></span>
<span id="cb275-4"><a href="visualizing-through-time.html#cb275-4"></a><span class="st">  </span><span class="kw">geom_point</span>()</span></code></pre></div>
<p><img src="04e-through-time_files/figure-html/unnamed-chunk-13-1.png" width="672" />
The three types are graphs are all that you may ever truly need when visualizing time. But sometimes it‚Äôs nice to go over the top and add all of the frills. Often a dynamic visualization may be more persuasive than a static one.For this, we can use animation and the <code>gganimate</code> package.</p>
</div>
<div id="animation-as-time" class="section level2" number="23.3">
<h2><span class="header-section-number">23.3</span> Animation as time</h2>
<p>In 2008 researchers at Microsoft and a scholar from Georgia Institute of Technology published a paper titled <em>Effectiveness of Animation in Trend Visualization</em><a href="#fn59" class="footnote-ref" id="fnref59"><sup>59</sup></a>. This paper explored the reaction to a talk from 2006 which captured the attention of many by using animation to visualize global trends in health. That TED talk by Hans Rosling was a moving utilization of data visualization<a href="#fn60" class="footnote-ref" id="fnref60"><sup>60</sup></a>. But why? This paper presented interactive and static visualizations to discover people‚Äôs perspective on animation and its alternatives. They found that</p>
<blockquote>
<p>‚Äúusers really liked the animation view: Study participants described it as‚Äùfun‚Äú,‚Äùexciting‚Äú, and even‚Äùemotionally touching." At the same time, though, some participants found it confusing: ‚Äúthe dots flew everywhere.‚Äù<a href="#fn61" class="footnote-ref" id="fnref61"><sup>61</sup></a></p>
</blockquote>
<p>We now have scientific backing that animation is pretty good but also we‚Äôre unsure‚Äîwhich seems to be in line with the rest of science. We will take the above quote as a measure of caution. That we <em>can</em> creaate animations but also be careful with our use of them. For the remainder of this chapter we will learn about the the extension to ggplot2, gganimate. gganimate extends ggplot by extending the grammar to include elements pertaining solely to animation.</p>
<p>When working with gganimate we need to think in the context of <em>frames</em>. Each frame will be a cross-section of our data. Or you can think of each frame a still in our film. In the context of time-series each frame will be our period of time. So if we continue with our Big Belly example above, each frame can be thought of as each month.</p>
<p>To create animations we will need to install four packages: <code>gganimate</code>, <code>gifski</code> (what a brilliant name), <code>png</code>, and <code>transformr</code>. You can do so by running <code>install.packages(c("gganimate", "gifski", "png", "transformr"))</code>.</p>
<p>For extending ggplot2, gganimate adds three main types of layers to ggplot. There are most importantly the <code>transition_*()</code>s and the <code>enter_*()</code> and <code>exit_*()</code> layers. In this chapter we will only address the <code>transition_*()</code> layers. The transitions will be used to move through our time dimension. For working with time data we will use <code>transition_states()</code> and <code>transition_reveal()</code>. These are best used with bar charts and line plot respectively.</p>
<p>Since we will be changing our frames by our time dimension‚Äî<code>month</code> in this case‚Äîwe start building our ggplot without it included. So, to create an animation of the counts by fullness by month we actually just start by visualizing the total counts.</p>
<div class="sourceCode" id="cb276"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb276-1"><a href="visualizing-through-time.html#cb276-1"></a>(p &lt;-<span class="st"> </span><span class="kw">count</span>(bb, month, fullness) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb276-2"><a href="visualizing-through-time.html#cb276-2"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(fullness, n)) <span class="op">+</span></span>
<span id="cb276-3"><a href="visualizing-through-time.html#cb276-3"></a><span class="st">  </span><span class="kw">geom_col</span>())</span></code></pre></div>
<p><img src="04e-through-time_files/figure-html/unnamed-chunk-14-1.png" width="672" />
All that is needed to add animation to this plot is a transition layer. For the use of a bar chart we can use <code>transition_states(states)</code> where states is the unquoted name of the column that wil be transitioned through.</p>
<div class="sourceCode" id="cb277"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb277-1"><a href="visualizing-through-time.html#cb277-1"></a><span class="kw">library</span>(gganimate)</span>
<span id="cb277-2"><a href="visualizing-through-time.html#cb277-2"></a></span>
<span id="cb277-3"><a href="visualizing-through-time.html#cb277-3"></a>p <span class="op">+</span><span class="st"> </span><span class="kw">transition_states</span>(month)  </span></code></pre></div>
<p><img src="04e-through-time_files/figure-html/unnamed-chunk-15-1.gif" /><!-- --></p>
<p>This is awesome! We‚Äôve created an animation üòÆ. The bars change heigh with each change of state. The only bummer is that we don‚Äôt know what states the animation is going through! When the animation is made there are four temporary variables made available for labeling. The documentation for <code>transition_states()</code> notes that the following variables are available<a href="#fn62" class="footnote-ref" id="fnref62"><sup>62</sup></a>.</p>
<ul>
<li><strong>transitioning</strong> is a boolean indicating whether the frame is part of the transitioning phase</li>
<li><strong>previous_state</strong> The name of the last state the animation was at</li>
<li><strong>closest_state</strong> The name of the state closest to this frame</li>
<li><strong>next_state</strong> The name of the next state the animation will be part of</li>
</ul>
<p>We can add a label layer to make this much more informative. To reference these variables we can use glue like quote strings with the above variables.</p>
<div class="sourceCode" id="cb278"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb278-1"><a href="visualizing-through-time.html#cb278-1"></a>p <span class="op">+</span><span class="st"> </span></span>
<span id="cb278-2"><a href="visualizing-through-time.html#cb278-2"></a><span class="st">  </span><span class="kw">transition_states</span>(month)  <span class="op">+</span></span>
<span id="cb278-3"><a href="visualizing-through-time.html#cb278-3"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;{closest_state}&quot;</span>)</span></code></pre></div>
<p><img src="04e-through-time_files/figure-html/unnamed-chunk-16-1.gif" /><!-- --></p>
<p>This ts the scaffolding for a great visualization. We can take this existing plot and add or adjust the layers to adjust the styling to be more engaging.</p>
<p>We can also add animation to our previous line plot. We can use the <code>transition_reveal()</code> layer to reveal changes over time.</p>
<div class="sourceCode" id="cb279"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb279-1"><a href="visualizing-through-time.html#cb279-1"></a><span class="kw">count</span>(bb, month, fullness) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb279-2"><a href="visualizing-through-time.html#cb279-2"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(month, n, <span class="dt">group =</span> fullness, <span class="dt">color =</span> fullness)) <span class="op">+</span></span>
<span id="cb279-3"><a href="visualizing-through-time.html#cb279-3"></a><span class="st">  </span><span class="kw">geom_line</span>() <span class="op">+</span><span class="st"> </span></span>
<span id="cb279-4"><a href="visualizing-through-time.html#cb279-4"></a><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></span>
<span id="cb279-5"><a href="visualizing-through-time.html#cb279-5"></a><span class="st">  </span><span class="kw">transition_reveal</span>(month)</span>
<span id="cb279-6"><a href="visualizing-through-time.html#cb279-6"></a></span>
<span id="cb279-7"><a href="visualizing-through-time.html#cb279-7"></a>Error<span class="op">:</span><span class="st"> </span>along data must either be integer, numeric, POSIXct, Date, difftime, orhms</span></code></pre></div>
<p>Note the above error. This is telling us that since our x, or time dimension is actually being treated as a factor, it cannot move along the axis. The error message is informative enough to let us know that we need to change month to a numeric value. As a way to address this but yet maintain the nice labeling on the x axis we can create another column called <code>month_integer</code> which is jsut the integer value of the month‚Äîso Jan is 1 etc. We can provide that value to <code>transition_reveal()</code>. Moreover <code>transition_reveal()</code> creates the <code>frame_along</code> temporary variable if you‚Äôd so like to use it.</p>
<div class="sourceCode" id="cb280"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb280-1"><a href="visualizing-through-time.html#cb280-1"></a><span class="kw">count</span>(bb, month, fullness) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb280-2"><a href="visualizing-through-time.html#cb280-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">month_integer =</span> <span class="kw">as.integer</span>(month)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb280-3"><a href="visualizing-through-time.html#cb280-3"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(month, n, <span class="dt">group =</span> fullness, <span class="dt">color =</span> fullness)) <span class="op">+</span></span>
<span id="cb280-4"><a href="visualizing-through-time.html#cb280-4"></a><span class="st">  </span><span class="kw">geom_line</span>() <span class="op">+</span><span class="st"> </span></span>
<span id="cb280-5"><a href="visualizing-through-time.html#cb280-5"></a><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></span>
<span id="cb280-6"><a href="visualizing-through-time.html#cb280-6"></a><span class="st">  </span><span class="kw">transition_reveal</span>(month_integer)</span></code></pre></div>
<p><img src="04e-through-time_files/figure-html/unnamed-chunk-18-1.gif" /><!-- --></p>
<p>This animation does a great job of illustrating the changing slopes of the fullness measures.</p>
<p>While it may seem a little underwhelming, these two functions can provide you with most of the functionality you will need for creating animations. Explore the functions in the package to explore how you can add to your animation and make it truly yours.</p>
<blockquote>
<p><code>help(package = "gganimate")</code> will bring up all of the help documentation for the package.</p>
</blockquote>
<p>And with that, we can conclude this section. Congratulations!</p>

</div>
</div>
<div class="footnotes">
<hr />
<ol start="59">
<li id="fn59"><p><a href="https://www.cc.gatech.edu/~stasko/papers/infovis08-anim.pdf">Effectiveness of Animation in Trend Visualization</a><a href="visualizing-through-time.html#fnref59" class="footnote-back">‚Ü©Ô∏é</a></p></li>
<li id="fn60"><p><a href="https://www.ted.com/talks/hans_rosling_the_best_stats_you_ve_ever_seen/transcript">Hans Rosling</a><a href="visualizing-through-time.html#fnref60" class="footnote-back">‚Ü©Ô∏é</a></p></li>
<li id="fn61"><p><a href="https://www.cc.gatech.edu/~stasko/papers/infovis08-anim.pdf">Effectiveness of Animation in Trend Visualization</a><a href="visualizing-through-time.html#fnref61" class="footnote-back">‚Ü©Ô∏é</a></p></li>
<li id="fn62"><p><a href="https://gganimate.com/reference/transition_states.html"><code>transition_states()</code></a><a href="visualizing-through-time.html#fnref62" class="footnote-back">‚Ü©Ô∏é</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="visualizing-beyond-2-dimensions.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="visualization-review.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["urban-commons-toolkit.pdf", "urban-commons-toolkit.epub"],
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
